///////////////////////////////////////////////////////////////////////////////
// FluidDripTrail. 
// 
// A dripping line that forms for a moment after you've sprayed a fluid along
// a 'ceiling' (anything with a negative in the normal.z. 
// This goes away pretty quickly
///////////////////////////////////////////////////////////////////////////////
class FluidDripTrail extends Fluid;


const FADE_TIME	=	5;


///////////////////////////////////////////////////////////////////////////////
// set up timer and lifespan to turn things off before end
///////////////////////////////////////////////////////////////////////////////
function PostBeginPlay()
{
	// Don't call super
	SetTimer(LifeSpan, false);
	LifeSpan+=FADE_TIME;
}

///////////////////////////////////////////////////////////////////////////////
// Set the extents of the emitter
///////////////////////////////////////////////////////////////////////////////
function SetLine(vector lstart, vector lend)
{
	SuperSpriteEmitter(Emitters[0]).LineStart = lstart;
	SuperSpriteEmitter(Emitters[0]).LineEnd = lend;
}

///////////////////////////////////////////////////////////////////////////////
// Set the projection for the emitter
///////////////////////////////////////////////////////////////////////////////
function SetProjectionNormal(vector HitNormal)
{
	local int i;

	//StripEmitter(Emitters[0]).SetProjectionNormal(HitNormal);
	for(i=0; i<Emitters.Length; i++)
	{
		SuperSpriteEmitter(Emitters[i]).SetProjectionNormal(HitNormal);
	}
}
///////////////////////////////////////////////////////////////////////////////
// Wait for a while to let the old particles die
///////////////////////////////////////////////////////////////////////////////
function ToggleFlow(float TimeToStop, bool bIsOn)
{
	Super.ToggleFlow(TimeToStop, bIsOn);

	SuperSpriteEmitter(Emitters[0]).AllowParticleSpawn=false;
}
/*
///////////////////////////////////////////////////////////////////////////////
// Wait for a while to let the old particles die
///////////////////////////////////////////////////////////////////////////////
function Timer()
{
	SuperSpriteEmitter(Emitters[0]).AllowParticleSpawn=false;
}
*/

defaultproperties
{
     LifeSpan=10.000000
}
