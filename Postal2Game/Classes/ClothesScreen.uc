///////////////////////////////////////////////////////////////////////////////
// ClothesScreen.uc
// Copyright 2002 Running With Scissors, Inc.  All Rights Reserved.
//
// Screen fades to black, dude changes his clothes to these new ones
// a sound is played, and the screen fades back in.
//
///////////////////////////////////////////////////////////////////////////////
class ClothesScreen extends P2Screen;

var() Sound	ChangeClothesSound;	// rustling clothes sound

///////////////////////////////////////////////////////////////////////////////
// Call this to bring up the screen
///////////////////////////////////////////////////////////////////////////////
function Show()
	{
	// Set our first state and start it up
	AfterFadeInScreen = 'ChangingClothes';
	Super.Start();
	}

///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////
// ChangingClothes
///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////
state ChangingClothes extends ShowScreen
{
	// Change our clothes, play a sound, then leave
	function BeginState()
	{
		local float Duration;

		// Play a sound as we change, and wait
		Duration = GetSoundDuration(ChangeClothesSound);
		GetSoundActor().PlaySound(ChangeClothesSound, SLOT_Misc);
		// Put our new clothes on
		GetPlayer().ChangeToNewClothes();
		// Return control to player
		DelayedGotoState(Duration, 'FadeOutScreen');
	}
}

///////////////////////////////////////////////////////////////////////////////
// Default properties
///////////////////////////////////////////////////////////////////////////////

defaultproperties
{
     ChangeClothesSound=Sound'MiscSounds.People.ChangeClothes'
     BackgroundName="nathans.Inventory.BlackBox64"
	 TileName="nathans.Inventory.BlackBox64"
}
