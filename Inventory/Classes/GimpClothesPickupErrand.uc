///////////////////////////////////////////////////////////////////////////////
// GimpClothesPickupErrand
// Copyright 2002 Running With Scissors, Inc.  All Rights Reserved.
//
// Only used with the 'piss on dad's grave' errand.
//
///////////////////////////////////////////////////////////////////////////////

class GimpClothesPickupErrand extends GimpClothesPickup;

///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////
// Pickup.. start wearing gimp outfit immediately
///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////
auto state Pickup
{	
	function Touch( actor Other )
	{
		local P2Player p2p;
			
		if ( ValidTouch(Other) ) 
		{	
			p2p = P2Player(Pawn(Other).Controller);

			if(p2p != None)
			{
				// Force Gimp clothes on the player
				p2p.SetClothes(InventoryType);
				AnnouncePickup(Pawn(Other));
				P2GameInfoSingle(Level.Game).TheGameState.DressedAsGimp++;
				// give them an achievement
				if (P2GameInfoSingle(Level.Game).TheGameState.DressedAsCop >= 1)
				{
					if(Level.NetMode != NM_DedicatedServer ) p2p.GetEntryLevel().EvaluateAchievement(p2p,'Fabulous');
				}
			}
		}
	}
}

///////////////////////////////////////////////////////////////////////////////
// Default properties
///////////////////////////////////////////////////////////////////////////////
defaultproperties
	{
	InventoryType=class'GimpClothesInvErrand'
	PickupMessage=""
	PickupSound=None
	}
